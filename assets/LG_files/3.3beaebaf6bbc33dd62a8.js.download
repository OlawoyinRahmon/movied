(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+kMu":function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return l}));r("QbLZ");var n=r("/f1G"),i=r.n(n),a=(r("YUnZ"),r("374s")),o=r("8ntr"),s=r("hqmY"),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(a.MODEL_CONSTRAINTS).filter((function(t){return(!e.withoutFK||t.short!==a.MODEL_CONSTRAINTS.FOREIGN_KEY.short)&&(!e.withoutPK||t.short!==a.MODEL_CONSTRAINTS.PRIMARY_KEY.short)})).map((function(e){return{label:e.short,value:e.short,desc:e.label,color:e.color}}))},c=function(){return i()(a.MODEL_INDEXES).map((function(e){return{label:e.short,value:e.short,desc:e.label,color:e.color}}))},p=function(e){return"model_"+e},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat((e/t).toFixed(2))},l=function(){var e=s.a.get(a.SESSION_STORAGE.PROJECTID),t=o.a.get(a.LOCAL_STORAGE.MODEL_TRANSFORM+"_"+e);return{translateX:(t=t&&t.split(","))&&parseFloat(t[0])||0,translateY:t&&parseFloat(t[1])||0,scale:t&&parseFloat(t[2])||1}}},"374s":function(e,t,r){"use strict";r.r(t),r.d(t,"LOCAL_STORAGE",(function(){return u})),r.d(t,"SESSION_STORAGE",(function(){return c})),r.d(t,"DOMAIN",(function(){return p})),r.d(t,"PROD_DOMAIN",(function(){return d})),r.d(t,"API_HOST",(function(){return l})),r.d(t,"methodToLabelMapping",(function(){return f})),r.d(t,"methodToClassName",(function(){return h})),r.d(t,"KEY_CODE",(function(){return v})),r.d(t,"SIDEBAR_WIDTH",(function(){return y})),r.d(t,"MODEL_CONSTRAINTS",(function(){return m})),r.d(t,"MODEL_CONSTRAINTS_SHORT_MAPPING",(function(){return g})),r.d(t,"MODEL_INDEXES",(function(){return b})),r.d(t,"MODEL_AUTH",(function(){return I})),r.d(t,"ORGANIZATION_ROLE",(function(){return k})),r.d(t,"PROJECT_ROLE",(function(){return w})),r.d(t,"DIAGRAM_TYPE",(function(){return j})),r.d(t,"PADDLE_INSENTIVE",(function(){return x})),r.d(t,"PRICE",(function(){return O})),r.d(t,"ACTIVIY_SECTION",(function(){return _})),r.d(t,"ACTIVIY_ACTION",(function(){return T})),r.d(t,"PREVIEW_STATE",(function(){return B}));var n=r("YEIV"),i=r.n(n),a=r("QbLZ"),o=r.n(a),s=r("GQeE"),u={MODEL_TRANSFORM:"__model_transform__"},c={PROJECTID:"__current_project_id__",TEAM_INVITE_TOKEN:"__team_invite_token__",PROJECT_COLLABORATPR_INVITE_TOKEN:"__project_collaborator_invite_token__",SIGNUP_CONFIRM_TOKEN:"__signup_confirm_token__"},p="https://dapiok.com",d="https://dapiok.com",l="https://api.dapiok.com",f={get:"GET",post:"POST",patch:"PATCH",delete:"DELETE",put:"PUT",head:"HEAD",connect:"CONNECT",options:"OPTIONS",trace:"TRACE"},h={get:"getBlue",post:"postOrange",patch:"patchGreen",delete:"delRed",put:"putGreen",head:"headPurple",connect:"connectYellow",options:"optionsBrown",trace:"traceCyan"},v={DEL:8,TAB:9,ENTER:13,ESC:27,COLON:186,SPACE:32,CONTROL:17,COMMAND:91,s:83},y=100,m={PRIMARY_KEY:{label:"Primary Key",short:"PK",color:"#77B87E"},FOREIGN_KEY:{label:"Foreign Key",short:"FK",color:"#568ef2"},UNIQUE:{label:"Unique",short:"Uni",color:"#EE726D"},NOT_NULL:{label:"Not Null",short:"NoN",color:"#7A24E8"}},g=r.n(s)()(m).reduce((function(e,t){return o()({},e,i()({},m[t].short,m[t].label))}),{}),b={INDEX:{label:"Index",short:"Index",color:"#F09541"},COMPOSITE_INDEX:{label:"Composite Unique Index",short:"Compos",color:"#4f566b"}},I={PRIVATE:"private",PUBLIC:"public"},k={CREATOR:0,OWNER:1,ADMIN:2,EDITOR:3,VIEWER:4},w={CREATOR:0,OWNER:1,COLLABORATOR:2,VIEWER:3},j={FLOW:"flow",SEQUENCE:"sequence",STATE:"state"},x={VENDOR_ID:20608,PRO_MONTHLY_ID:662926,PRO_YEARLY_ID:662927,SANDBOX_VENDOR_ID:2605,SANDBOX_PRO_MONTHLY_ID:13617,SANDBOX_PRO_YEARLY_ID:13618},O={MONTHLY:29,YEARLY:290},_={API:"api",MODEL:"model",DIAGRAM:"diagram"},T={CREATE:"create",UPDATE:"update",DELETE:"delete"},B={INITIAL:"initial",BUILDING:"building",DEPLOYED:"deployed"}},"8ntr":function(e,t,r){"use strict";var n=r("gDS+"),i=r.n(n),a=r("EJiy"),o=r.n(a);t.a={get:function(e,t){var r=window.localStorage.getItem(e);if(!r)return r;switch(t){case"int":return parseInt(r,10);case"float":return parseFloat(r);default:return r}},set:function(e,t){"number"==typeof t&&(t=String(t)),"object"===(void 0===t?"undefined":o()(t))&&(t=i()(t)),window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)},clear:function(){window.localStorage.clear()}}},Fu3s:function(e,t,r){"use strict";r.d(t,"c",(function(){return Z})),r.d(t,"q",(function(){return be})),r.d(t,"f",(function(){return Je})),r.d(t,"r",(function(){return Ce})),r.d(t,"d",(function(){return Ue})),r.d(t,"n",(function(){return tt})),r.d(t,"m",(function(){return bt})),r.d(t,"k",(function(){return ft})),r.d(t,"l",(function(){return xt})),r.d(t,"s",(function(){return Bt})),r.d(t,"o",(function(){return Mt})),r.d(t,"e",(function(){return Lt})),r.d(t,"i",(function(){return Gt})),r.d(t,"g",(function(){return Ft})),r.d(t,"h",(function(){return Wt})),r.d(t,"a",(function(){return rr})),r.d(t,"b",(function(){return or})),r.d(t,"p",(function(){return gr})),r.d(t,"j",(function(){return dr}));var n=r("SEkw"),i=r.n(n),a=r("JO7F"),o=r.n(a),s=r("gDS+"),u=r.n(s),c=r("14Xm"),p=r.n(c),d=r("D3Ub"),l=r.n(d),f=r("iCc5"),h=r.n(f),v=r("V7oC"),y=r.n(v),m=r("2vnA"),g=r("mS/U"),b=r("Yz+Y"),I=r.n(b),k=r("FYw3"),w=r.n(k),j=r("mRg0"),x=r.n(j),O=r("jWXv"),_=r.n(O),T=r("QbLZ"),B=r.n(T),E=r("EJiy"),z=r.n(E),P=r("4d7F"),A=r.n(P),C=r("24Ii"),M=r.n(C),R=r("Wgwc"),D=r.n(R),S=r("QgiU"),L=r.n(S);D.a.extend(L.a);var N,q,U,G,K,Y=r("374s").API_HOST,F=function(){function e(){h()(this,e)}return y()(e,[{key:"request",value:function(e,t,r){var n=this;return new A.a((function(i,a){var o=Y;n.baseAgent(e,o+t,r).withCredentials().end((function(e,t){if(e||t.statusCode>=400||r&&r.successStatus&&t.statusCode!==r.successStatus){if(t.body&&t.body.error)switch(z()(t.body.error)){case"object":return a(t.body.error);default:return a({status:t.statusCode,message:t.body.error})}if(e)return a({status:t.statusCode,message:e.message})}i(t.body)}))}))}},{key:"baseAgent",value:function(e,t,r){var n=B()({Accept:"application/json"},r&&r.headers),i=M()(e,t).set(n);if(r&&r.body){var a=r&&r.type||"json";i.type(a).send(r.body)}return r&&r.query&&i.query(r.query),i}},{key:"_genRelativeDate",value:function(e){return D()().diff(D()(e),"day")<=7?D()(e).fromNow():D()(e).format("YYYY/MM/DD HH:mm")}},{key:"create",value:function(e){var t=this;return this.request("POST",""+this.api,{body:{data:e}}).then((function(e){return t.processor?(e&&e.data&&(e.data=t.processor(e.data)),e):e}))}},{key:"findAll",value:function(){var e=this;return this.request("GET",""+this.api).then((function(t){return e.processor?B()({},t,{data:t.data.map((function(t){return e.processor(t)}))}):t}))}},{key:"findById",value:function(e){var t=this;return this.request("GET",this.api+"/"+e).then((function(e){return t.processor?B()({},e,{data:t.processor(e.data)}):e}))}},{key:"updateById",value:function(e,t){var r=this;return this.request("PATCH",this.api+"/"+e,{body:{data:t}}).then((function(e){return r.processor?e?(e.data&&(e.data=r.processor(e.data)),e):void 0:e}))}},{key:"removeById",value:function(e){return this.request("DELETE",this.api+"/"+e)}},{key:"processorUser",value:function(e){return e.avatarConfig&&(e.avatarConfig=JSON.parse(e.avatarConfig)),e}},{key:"processorProject",value:function(e){var t=this;return e.collaborators&&(e.collaborators=e.collaborators.map((function(e){return e.user&&(e.user=t.processorUser(e.user)),e}))),e.myRole&&(e.myRole=e.myRole.role),e.organization&&(e.organization=this.processorOrganization(e.organization),null==e.organization.myRole&&(e.isMyProject=!0)),e.contributors=e.contributors||[],e.contributors=e.contributors.map((function(e){return t.processorUser(e.user)})),e.tabs&&e.tabs.hide&&(e.tabs.hide=new _.a(e.tabs.hide)),e}},{key:"processorEndpoint",value:function(e){return e}},{key:"processorDiagram",value:function(e){return e.updatedAt&&(e.updatedAtString=this._genRelativeDate(e.updatedAt)),e}},{key:"processorOrganization",value:function(e){var t=this;return e.members&&(e.members=e.members.map((function(e){return e.user&&(e.user=t.processorUser(e.user)),e}))),e.projects&&(e.projects=e.projects.map((function(e){return t.processorProject(e)}))),e.myRole&&(e.myRole=e.myRole.role),e}},{key:"processorActivity",value:function(e){return e.user&&(e.user=this.processorUser(e.user)),e.createdAt&&(e.dateToDay=D()(e.createdAt).format("YYYY-MM-DD")),e}},{key:"processorApiTemplate",value:function(e){return e}},{key:"processorPreview",value:function(e){return e}}]),e}(),V=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/users",e.processor=e.processorUser,e}var r,n;return x()(t,e),y()(t,[{key:"updateMyInfo",value:(n=l()(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("PATCH",this.api+"/my/info",{body:{data:t}});case 2:return(r=e.sent).data=this.processor(r.data),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"find",value:(r=l()(p.a.mark((function e(t){var r,n=t.email;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("POST",this.api+"/find",{body:{data:n}});case 2:return(r=e.sent).data&&(r.data=this.processor(r.data)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"confirmSignup",value:function(e){return this.request("POST",this.api+"/my/confirm",{body:{data:e}})}},{key:"resendConfirm",value:function(){return this.request("GET",this.api+"/confirm/resend")}}]),t}(F)),H=new(function(e){function t(){return h()(this,t),w()(this,(t.__proto__||I()(t)).apply(this,arguments))}var r,n,i;return x()(t,e),y()(t,[{key:"ping",value:(i=l()(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("GET","/api/ping");case 2:return(t=e.sent).data&&(t.data=this.processorUser(t.data)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"login",value:(n=l()(p.a.mark((function e(t){var r,n=t.email,i=t.password;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("POST","/api/auth/login",{body:{email:n,password:i}});case 2:return(r=e.sent).data=this.processorUser(r.data),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"signup",value:(r=l()(p.a.mark((function e(t){var r,n=t.email,i=t.password,a=t.name,o=t.avatarConfig;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("POST","/api/auth/signup",{body:{email:n,password:i,name:a,avatarConfig:o}});case 2:return(r=e.sent).data=this.processorUser(r.data),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"logout",value:function(){return this.request("POST","/api/auth/logout")}},{key:"authenticateGoogle",value:function(){return this.request("GET","/api/auth/google")}}]),t}(F));function J(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function X(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var W,Q,Z=new(N=function(){function e(){h()(this,e),J(this,"isLogin",q,this),J(this,"isLoaded",U,this),J(this,"user",G,this),J(this,"notifications",K,this)}var t,r,n,i,a,o;return y()(e,[{key:"ping",value:(o=l()(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.ping();case 2:t=e.sent,r=t.data,this.user.replace(r),this.isLogin=!0;case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"login",value:(a=l()(p.a.mark((function e(t){var r,n,i=t.email,a=t.password;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.login({email:i,password:a});case 2:r=e.sent,n=r.data,this.user.replace(n),this.isLogin=!0;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"signup",value:(i=l()(p.a.mark((function e(t){var r,n,i=t.email,a=t.password,o=t.name;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.signup({email:i,name:o,password:a,avatarConfig:u()(Object(g.genConfig)())});case 2:return r=e.sent,n=r.data,this.user.replace(n),this.isLogin=!0,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"logout",value:(n=l()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.logout();case 2:this.isLogin=!1,this.user.clear();case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loaded",value:function(){this.isLoaded=!0}},{key:"updateMyInfo",value:(r=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.updateMyInfo(t);case 2:return r=e.sent,n=r.data,this.user.replace(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"confirmSignup",value:(t=l()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.confirmSignup(t);case 2:this.user.set("isConfirmed",!0);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateUser",value:function(e){this.user.replace(e)}},{key:"cancelSubs",value:function(){var e=this.user.get("membership");e.subscribed=!1,this.user.set("membership",e)}},{key:"authenticateGoogle",value:function(){return H.authenticateGoogle()}},{key:"resendConfirm",value:function(){return V.resendConfirm()}},{key:"membershipName",get:function(){var e=this.user.get("membership");if(!e)return"Starter";switch(e.type){case"pro":return"Professional"}return null}},{key:"email",get:function(){return this.user.get("email")}}]),e}(),q=X(N.prototype,"isLogin",[m.n],{enumerable:!0,initializer:function(){return!1}}),U=X(N.prototype,"isLoaded",[m.n],{enumerable:!0,initializer:function(){return!1}}),G=X(N.prototype,"user",[m.n],{enumerable:!0,initializer:function(){return m.n.map({})}}),K=X(N.prototype,"notifications",[m.n],{enumerable:!0,initializer:function(){return[]}}),X(N.prototype,"membershipName",[m.g],o()(N.prototype,"membershipName"),N.prototype),X(N.prototype,"email",[m.g],o()(N.prototype,"email"),N.prototype),X(N.prototype,"ping",[m.f],o()(N.prototype,"ping"),N.prototype),X(N.prototype,"login",[m.f],o()(N.prototype,"login"),N.prototype),X(N.prototype,"signup",[m.f],o()(N.prototype,"signup"),N.prototype),X(N.prototype,"logout",[m.f],o()(N.prototype,"logout"),N.prototype),X(N.prototype,"loaded",[m.f],o()(N.prototype,"loaded"),N.prototype),X(N.prototype,"updateMyInfo",[m.f],o()(N.prototype,"updateMyInfo"),N.prototype),X(N.prototype,"confirmSignup",[m.f],o()(N.prototype,"confirmSignup"),N.prototype),X(N.prototype,"updateUser",[m.f],o()(N.prototype,"updateUser"),N.prototype),X(N.prototype,"cancelSubs",[m.f],o()(N.prototype,"cancelSubs"),N.prototype),X(N.prototype,"authenticateGoogle",[m.f],o()(N.prototype,"authenticateGoogle"),N.prototype),X(N.prototype,"resendConfirm",[m.f],o()(N.prototype,"resendConfirm"),N.prototype),N),$=r("rfXi"),ee=r.n($),te=r("zT9C"),re=r.n(te);var ne,ie,ae,oe,se,ue,ce,pe,de,le=(W=function(){function e(){var t,r,n,a;h()(this,e),t=this,r="observerTrigger",a=this,(n=Q)&&i()(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0})}return y()(e,[{key:"triggerObserver",value:function(){var e=this.observerTrigger<2?1:-1;this.observerTrigger+=e}}]),e}(),ne=W.prototype,ie="observerTrigger",ae=[m.n],oe={enumerable:!0,initializer:function(){return 1}},ue={},Object.keys(oe).forEach((function(e){ue[e]=oe[e]})),ue.enumerable=!!ue.enumerable,ue.configurable=!!ue.configurable,("value"in ue||ue.initializer)&&(ue.writable=!0),ue=ae.slice().reverse().reduce((function(e,t){return t(ne,ie,e)||e}),ue),se&&void 0!==ue.initializer&&(ue.value=ue.initializer?ue.initializer.call(se):void 0,ue.initializer=void 0),void 0===ue.initializer&&(Object.defineProperty(ne,ie,ue),ue=null),Q=ue,W),fe=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/projects",e.processor=e.processorProject,e}var r,n,i;return x()(t,e),y()(t,[{key:"findMyAll",value:(i=l()(p.a.mark((function e(){var t,r=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("GET",""+this.api);case 2:return(t=e.sent).data=t.data.map((function(e){return r.processor(e)})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"findAllByOrg",value:(n=l()(p.a.mark((function e(t){var r,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("GET",this.api+"/org/"+t);case 2:return(r=e.sent).data=r.data.map((function(e){return n.processor(e)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"addCollaborator",value:(r=l()(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("POST",this.api+"/"+t+"/collaborators",{body:{data:r}});case 2:return(n=e.sent).data&&n.data.user&&(n.data.user=this.processorUser(n.data.user)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"deleteCollaborator",value:function(e){var t=e.projectId,r=e.email;return this.request("DELETE",this.api+"/"+t+"/collaborators",{body:{data:{email:r}}})}},{key:"confirmCollaborator",value:function(e){return this.request("POST",this.api+"/collaborators/confirm",{body:{data:e}})}},{key:"updateTabs",value:function(e,t){return this.request("PATCH",this.api+"/"+e+"/tabs",{body:{data:t}})}}]),t}(F));function he(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ve(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ye,me,ge=["api","model","diagram"],be=new(ce=function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return he(e,"myList",pe,e),he(e,"myListLoaded",de,e),e.data={},e.org={},e}var r,n,i,a,o,s,u,c;return x()(t,e),y()(t,[{key:"addProject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o,{isMyProject:s.isMyProject})}o.organizationId&&(this.org[o.organizationId]=this.org[o.organizationId]||{data:[]},this.org[o.organizationId].data.includes(e.id)||this.org[o.organizationId].data.unshift(e.id)),this.data[e.id]=o,this.data[e.id].tabs||(this.data[e.id].tabs={}),this.data[e.id].tabs.order||(this.data[e.id].tabs.order=ge.slice(0)),this.data[e.id].tabs.hide||(this.data[e.id].tabs.hide=new _.a);var u=new _.a(ge);this.data[e.id].tabs.order=this.data[e.id].tabs.order.filter((function(e){return u.delete(e)})),u.size>0&&(this.data[e.id].tabs.order=this.data[e.id].tabs.order.concat(ee()(u)))}}},{key:"findMyAll",value:(c=l()(p.a.mark((function e(){var t,r,n,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.findMyAll();case 2:return t=e.sent,r=t.data,n=r.map((function(e){return e.isMyProject=!0,i.addProject(e),e.id})),this.myList.replace(n),this.myListLoaded=!0,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"findById",value:(u=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.findById(t);case 2:return r=e.sent,n=r.data,this.addProject(n,{assign:!0}),this.triggerObserver(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"create",value:(s=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.create(t);case 2:return r=e.sent,n=r.data,this.addProject(n),t.organizationId||this.myList.unshift(n.id),this.triggerObserver(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"updateById",value:(o=l()(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.updateById(t,r);case 2:this.addProject(B()({},r,{id:t}),{assign:!0}),this.triggerObserver();case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"removeById",value:(a=l()(p.a.mark((function e(t){var r,n,i,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.data[t],n=r.organizationId,i=this.myList.findIndex((function(e){return e===t})),a=n?this.org[n].data.findIndex((function(e){return e===t})):-1,e.prev=4,-1!==i&&this.myList.splice(i,1),-1!==a&&this.org[n].data.splice(a,1),e.next=9,fe.removeById(t);case 9:delete this.data[t],this.triggerObserver(),e.next=19;break;case 13:throw e.prev=13,e.t0=e.catch(4),-1!==i&&this.myList.splice(i,0,t),-1!==a&&this.org[n].data.splice(a,0,t),this.triggerObserver(),e.t0;case 19:case"end":return e.stop()}}),e,this,[[4,13]])}))),function(e){return a.apply(this,arguments)})},{key:"addCollaborator",value:(i=l()(p.a.mark((function e(t,r){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.addCollaborator(t,r);case 2:n=e.sent,i=n.data,this.data[t].collaborators=this.data[t].collaborators||[],this.data[t].collaborators.push(i),this.triggerObserver();case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"deleteCollaborator",value:(n=l()(p.a.mark((function e(t){var r,n=t.projectId,i=t.email;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.deleteCollaborator({projectId:n,email:i});case 2:r=this.data[n].collaborators.findIndex((function(e){return e.email===i})),this.data[n].collaborators.splice(r,1),this.triggerObserver();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"confirmCollaborator",value:function(e){return fe.confirmCollaborator(e)}},{key:"updateTabs",value:(r=l()(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=re()(this.data[t].tabs),this.data[t].tabs=r,this.triggerObserver(),e.prev=3,e.next=6,fe.updateTabs(t,B()({},r,{hide:r.hide?ee()(r.hide):[]}));case 6:e.next=13;break;case 8:throw e.prev=8,e.t0=e.catch(3),this.data[t].tabs=n,this.triggerObserver(),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e,t){return r.apply(this,arguments)})}]),t}(le),pe=ve(ce.prototype,"myList",[m.n],{enumerable:!0,initializer:function(){return[]}}),de=ve(ce.prototype,"myListLoaded",[m.n],{enumerable:!0,initializer:function(){return!1}}),ve(ce.prototype,"findMyAll",[m.f],o()(ce.prototype,"findMyAll"),ce.prototype),ve(ce.prototype,"findById",[m.f],o()(ce.prototype,"findById"),ce.prototype),ve(ce.prototype,"create",[m.f],o()(ce.prototype,"create"),ce.prototype),ve(ce.prototype,"updateById",[m.f],o()(ce.prototype,"updateById"),ce.prototype),ve(ce.prototype,"removeById",[m.f],o()(ce.prototype,"removeById"),ce.prototype),ve(ce.prototype,"addCollaborator",[m.f],o()(ce.prototype,"addCollaborator"),ce.prototype),ve(ce.prototype,"deleteCollaborator",[m.f],o()(ce.prototype,"deleteCollaborator"),ce.prototype),ve(ce.prototype,"confirmCollaborator",[m.f],o()(ce.prototype,"confirmCollaborator"),ce.prototype),ve(ce.prototype,"updateTabs",[m.f],o()(ce.prototype,"updateTabs"),ce.prototype),ce),Ie=r("YEIV"),ke=r.n(Ie),we=r("GQeE"),je=r.n(we),xe=r("7Cbv"),Oe=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/endpoints",e.processor=e.processorEndpoint,e}var r,n,i;return x()(t,e),y()(t,[{key:"findByProjectId",value:(i=l()(p.a.mark((function e(t){var r,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("GET",this.api+"/projects/"+t,{query:i});case 2:return r=e.sent,"tag"===i.group?je()(r.data).forEach((function(e){r.data[e]=r.data[e].map((function(e){return n.processor(e)}))})):r.data&&(r.data=r.data.map((function(e){return n.processor(e)}))),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"searchAll",value:(n=l()(p.a.mark((function e(t){var r,n=this,i=t.word,a=t.projectId,o=t.type,s=void 0===o?"full":o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("POST",this.api+"/all/search",{query:{type:s},body:{data:{word:i,projectId:a}}});case 2:return(r=e.sent).data&&(r.data=r.data.map((function(e){return n.processor(e)}))),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"batchCreate",value:(r=l()(p.a.mark((function e(t){var r,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("POST",this.api+"/batch/create",{body:{data:t}});case 2:return(r=e.sent).data&&(r.data=r.data.map((function(e){return n.processor(e)}))),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"move",value:function(e){var t=e.id,r=e.beforeEndpointId,n=e.afterEndpointId;return this.request("POST",this.api+"/"+t+"/move",{body:{data:{beforeEndpointId:r,afterEndpointId:n}}})}}]),t}(F)),_e=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/tags",e}return x()(t,e),y()(t,[{key:"findByProjectId",value:function(e){return this.request("GET",this.api+"/projects/"+e)}},{key:"move",value:function(e){var t=e.id,r=e.beforeTagId,n=e.afterTagId;return this.request("POST",this.api+"/"+t+"/move",{body:{data:{beforeTagId:r,afterTagId:n}}})}}]),t}(F));function Te(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Be,Ee,ze,Pe,Ae,Ce=new(ye=function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return function(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(e,"projects",me,e),e.data={},e}var r,n,a,o;return x()(t,e),y()(t,[{key:"genDefaultTagId",value:function(e){return e+"_default"}},{key:"isDefaultTag",value:function(e,t){return e===this.genDefaultTagId(t)}},{key:"addTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}this.data[e.id]=o}}},{key:"create",value:(o=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(xe.a)(),t.id=r,this.addTag(t),this.projects.get(t.projectId).data.splice(this.projects.get(t.projectId).data.length-1,0,r),e.prev=4,e.next=7,_e.create(t);case 7:e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(4),n=this.projects.get(t.projectId).data.findIndex((function(e){return e===r})),this.projects.get(t.projectId).data.splice(n,1),e.t0;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return o.apply(this,arguments)})},{key:"updateById",value:(a=l()(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=re()(this.data[t]),this.addTag(B()({},r,{id:t}),{assign:!0}),this.triggerObserver(),e.prev=3,e.next=6,_e.updateById(t,r);case 6:e.next=13;break;case 8:throw e.prev=8,e.t0=e.catch(3),this.addTag(B()({},n,{id:t}),{assign:!0}),this.triggerObserver(),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e,t){return a.apply(this,arguments)})},{key:"findByProjectId",value:(n=l()(p.a.mark((function e(t){var r,n,i,a,o=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.findByProjectId(t);case 2:return r=e.sent,n=r.data,i=n.map((function(e){return o.addTag(e),e.id})),a=this.genDefaultTagId(t),this.projects.set(t,{data:i.concat([a])}),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"removeById",value:(r=l()(p.a.mark((function e(t){var r,n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.data[t],n=r.projectId,i=this.projects.get(n).data.findIndex((function(e){return e===t})),this.projects.get(n).data.splice(i,1),e.prev=4,e.next=7,_e.removeById(t);case 7:delete this.data[t],e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(4),this.projects.get(n).data.splice(i,0,t),e.t0;case 14:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(e){return r.apply(this,arguments)})},{key:"findIdByName",value:function(e){var t=this,r=e.name,n=e.projectId;if(this.projects.has(n))return this.projects.get(n).data.find((function(e){return t.data[e]&&t.data[e].name===r}))}},{key:"changePosition",value:function(e,t,r){if(this.projects.has(e)){var n=this.projects.get(e).data[t];this.projects.get(e).data[t]=this.projects.get(e).data[r],this.projects.get(e).data[r]=n,this.triggerObserver()}}},{key:"move",value:function(e,t){if(this.projects.has(t)){var r=this.projects.get(t).data.findIndex((function(t){return t===e}));if(-1!==r){var n=0===r?null:this.projects.get(t).data[r-1],i=r===this.projects.get(t).data.length-2?null:this.projects.get(t).data[r+1];return _e.move({id:e,beforeTagId:n,afterTagId:i})}}}}]),t}(le),me=Te(ye.prototype,"projects",[m.n],{enumerable:!0,initializer:function(){return m.n.map({})}}),Te(ye.prototype,"create",[m.f],o()(ye.prototype,"create"),ye.prototype),Te(ye.prototype,"updateById",[m.f],o()(ye.prototype,"updateById"),ye.prototype),Te(ye.prototype,"findByProjectId",[m.f],o()(ye.prototype,"findByProjectId"),ye.prototype),Te(ye.prototype,"removeById",[m.f],o()(ye.prototype,"removeById"),ye.prototype),Te(ye.prototype,"findIdByName",[m.f],o()(ye.prototype,"findIdByName"),ye.prototype),Te(ye.prototype,"changePosition",[m.f],o()(ye.prototype,"changePosition"),ye.prototype),Te(ye.prototype,"move",[m.f],o()(ye.prototype,"move"),ye.prototype),ye),Me=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/components",e}return x()(t,e),y()(t,[{key:"process",value:function(e){return e}},{key:"findByProjectId",value:function(e){var t=this;return this.request("GET",this.api+"/projects/"+e).then((function(e){return B()({},e,{data:e.data.map((function(e){return t.process(e)}))})}))}},{key:"move",value:function(e){var t=e.currentComponent,r=e.beforeComponent,n=e.afterComponent;return this.request("POST",this.api+"/ordering/move",{body:{data:{currentComponent:t,beforeComponent:r,afterComponent:n}}})}}]),t}(F));function Re(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function De(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Se,Le,Ne,qe,Ue=new(Be=function(){function e(){h()(this,e),Re(this,"observerTrigger",Ee,this),Re(this,"isLoaded",ze,this),Re(this,"list",Pe,this),Re(this,"projects",Ae,this),this.data={},this.listByRanking={},this._nameData={},this._idToName={},this.isJumpingToPointed=!1,this.justAddedId=null}var t,r,n,i,a,o;return y()(e,[{key:"addComponent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}this.data[e.id]=o,this.registerComponentName({type:"component",projectId:o.projectId,data:o})}}},{key:"triggerObserver",value:function(){var e=this.observerTrigger<2?1:-1;this.observerTrigger+=e}},{key:"findAll",value:(o=l()(p.a.mark((function e(){var t,r,n,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.findAll();case 2:return t=e.sent,r=t.data,n=r.map((function(e){return i.addComponent(e),e.id})),this.list.replace(n),this.isLoaded=!0,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"findById",value:(a=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.findById(t);case 2:return r=e.sent,n=r.data,this.addComponent(n,{force:!0}),this.triggerObserver(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"create",value:(i=l()(p.a.mark((function e(t,r){var n,i,a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(xe.a)(),t.id=n,this.addComponent(t),this.triggerObserver(),this.projects.get(t.projectId).data.unshift(n),this.justAddedId=n,setTimeout((function(){a.justAddedId=null}),1e3),r&&r(n),e.prev=8,e.next=11,Me.create(t);case 11:e.next=18;break;case 13:throw e.prev=13,e.t0=e.catch(8),i=this.projects.get(t.projectId).data.findIndex((function(e){return e===n})),this.projects.get(t.projectId).data.splice(i,1),e.t0;case 18:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(e,t){return i.apply(this,arguments)})},{key:"updateById",value:(n=l()(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.updateById(t,r);case 2:this.addComponent(B()({},r,{id:t}),{assign:!0}),this.triggerObserver();case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"removeById",value:(r=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.data[t],n=this.projects.get(r.projectId).data.findIndex((function(e){return e===t})),e.prev=2,this.projects.get(r.projectId).data.splice(n,1),e.next=6,Me.removeById(t);case 6:this.unRegisterComponent(t),delete this.data[t],this.triggerObserver(),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(2),this.projects.get(r.projectId).data.splice(n,0,t),e.t0;case 15:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(e){return r.apply(this,arguments)})},{key:"findByProjectId",value:(t=l()(p.a.mark((function e(t){var r,n,i,a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.findByProjectId(t);case 2:return r=e.sent,n=r.data,i=n.map((function(e){return a.addComponent(e),e.id})),this.projects.set(t,{data:i}),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"registerComponentName",value:function(e){var t=e.projectId,r=e.type,n=e.data;this._nameData[t]=this._nameData[t]||{},this._nameData[t][n.name]||(this._nameData[t][n.name]={type:r,id:n.id}),this._idToName[t]=this._idToName[t]||{};var i=this._idToName[t][n.id];i&&i!==n.name&&delete this._nameData[t][i],this._idToName[t][n.id]=n.name,this.listByRanking[t]=this.listByRanking[t]||[],-1===this.listByRanking[t].findIndex((function(e){return e.id===n.id}))&&(this.listByRanking[t].push({type:r,id:n.id,ranking:n.ranking}),this.listByRanking[t].sort((function(e,t){return e.ranking-t.ranking})))}},{key:"unRegisterComponent",value:function(e){var t=this.data[e],r=t.projectId;if(this._idToName[r]&&delete this._idToName[r][e],this._nameData[r]&&delete this._nameData[r][t.name],this.listByRanking[r]){var n=this.listByRanking[r].findIndex((function(t){return t.id===e}));this.listByRanking[r].splice(n,1)}}},{key:"unRegisterModel",value:function(e){var t=e.projectId;if(this._idToName[t]&&delete this._idToName[t][e.id],this._nameData[t]&&delete this._nameData[t][e.name],this.listByRanking[t]){var r=this.listByRanking[t].findIndex((function(t){return t.id===e.id}));this.listByRanking[t].splice(r,1)}}},{key:"findByName",value:function(e){var t=e.projectId,r=e.name;if(r=r.replace(/^#\/components\/schemas\//,""),this._nameData[t]&&this._nameData[t][r])return this._nameData[t][r]}},{key:"jumpToPointed",value:function(){var e=this;this.isJumpingToPointed=!0,setTimeout((function(){e.isJumpingToPointed=!1}),1500)}},{key:"changePosition",value:function(e,t,r){if(this.listByRanking[e]){var n=this.listByRanking[e][t];this.listByRanking[e][t]=this.listByRanking[e][r],this.listByRanking[e][r]=n,this.triggerObserver()}}},{key:"move",value:function(e,t){if(this.listByRanking[t]){var r=this.listByRanking[t].findIndex((function(t){return t.id===e}));if(-1!==r){var n={id:e,type:this.listByRanking[t][r].type},i=0===r?null:{id:this.listByRanking[t][r-1].id,type:this.listByRanking[t][r-1].type},a=r===this.listByRanking[t].length-1?null:{id:this.listByRanking[t][r+1].id,type:this.listByRanking[t][r+1].type};return Me.move({currentComponent:n,beforeComponent:i,afterComponent:a})}}}}]),e}(),Ee=De(Be.prototype,"observerTrigger",[m.n],{enumerable:!0,initializer:function(){return 1}}),ze=De(Be.prototype,"isLoaded",[m.n],{enumerable:!0,initializer:function(){return!1}}),Pe=De(Be.prototype,"list",[m.n],{enumerable:!0,initializer:function(){return[]}}),Ae=De(Be.prototype,"projects",[m.n],{enumerable:!0,initializer:function(){return m.n.map({})}}),De(Be.prototype,"findAll",[m.f],o()(Be.prototype,"findAll"),Be.prototype),De(Be.prototype,"findById",[m.f],o()(Be.prototype,"findById"),Be.prototype),De(Be.prototype,"create",[m.f],o()(Be.prototype,"create"),Be.prototype),De(Be.prototype,"updateById",[m.f],o()(Be.prototype,"updateById"),Be.prototype),De(Be.prototype,"removeById",[m.f],o()(Be.prototype,"removeById"),Be.prototype),De(Be.prototype,"findByProjectId",[m.f],o()(Be.prototype,"findByProjectId"),Be.prototype),De(Be.prototype,"registerComponentName",[m.f],o()(Be.prototype,"registerComponentName"),Be.prototype),De(Be.prototype,"unRegisterComponent",[m.f],o()(Be.prototype,"unRegisterComponent"),Be.prototype),De(Be.prototype,"unRegisterModel",[m.f],o()(Be.prototype,"unRegisterModel"),Be.prototype),De(Be.prototype,"findByName",[m.f],o()(Be.prototype,"findByName"),Be.prototype),De(Be.prototype,"jumpToPointed",[m.f],o()(Be.prototype,"jumpToPointed"),Be.prototype),De(Be.prototype,"changePosition",[m.f],o()(Be.prototype,"changePosition"),Be.prototype),De(Be.prototype,"move",[m.f],o()(Be.prototype,"move"),Be.prototype),Be);function Ge(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ke(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Ye,Fe,Ve,He,Je=new(Se=function(){function e(){h()(this,e),Ge(this,"observerTrigger",Le,this),Ge(this,"tags",Ne,this),Ge(this,"projects",qe,this),this.data={},this._componentUsed={},this.isJumpingToPointed=!1,this.justAddedId=null}var t,r,n,i,a,o,s;return y()(e,[{key:"addEndpoint",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.force,i=void 0!==n&&n,a=r.assign,o=void 0!==a&&a,s=r.skipAddToProject,c=void 0!==s&&s,p=r.skipAddToTag,d=void 0!==p&&p;if(i||!this.data[e.id]||o){var l=e;if(this.data[e.id]&&o){var f=this.data[e.id];l=B()({},f,l)}this._componentUsed[e.id]=new _.a;var h=u()(l).match(/{"\$ref":\s*"#\/components\/schemas\/[^"]+"}/g)||[];if(h.forEach((function(r){var n=JSON.parse(r).$ref,i=Ue.findByName({projectId:l.projectId,name:n});i&&t._componentUsed[e.id].add(i.id)})),this.data[e.id]=l,l.projectId&&!c&&(this.projects.has(l.projectId)||this.projects.set(l.projectId,{data:[]}),this.projects.get(l.projectId).data.includes(l.id)||this.projects.get(l.projectId).data.push(l.id)),!d){var v=l.tagId||Ce.genDefaultTagId(l.projectId);this.tags.has(v)||this.tags.set(v,{data:[]}),this.tags.get(v).data.includes(l.id)||this.tags.get(v).data.push(l.id)}}}},{key:"triggerObserver",value:function(){var e=this.observerTrigger<2?1:-1;this.observerTrigger+=e}},{key:"findByProjectId",value:(s=l()(p.a.mark((function e(t){var r,n,i,a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.findByProjectId(t,{group:"tag"});case 2:return r=e.sent,n=r.data,i=[],je()(n).forEach((function(e){var r=n[e].map((function(e){return a.addEndpoint(e,{skipAddToProject:!0}),e.id}));i=i.concat(r);var o="default"===e&&Ce.genDefaultTagId(t)||e;a.tags.set(o,{data:r})})),this.projects.set(t,{data:i}),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"create",value:(o=l()(p.a.mark((function e(t,r){var n,i,a,o,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(xe.a)(),t.id=n,this.addEndpoint(t),this.justAddedId=t.id,setTimeout((function(){s.justAddedId=null}),1e3),r&&r(n),e.prev=6,t.tagId&&Ce.isDefaultTag(t.tagId,t.projectId)&&(t.tagId=null),e.next=10,Oe.create(t);case 10:e.next=20;break;case 12:throw e.prev=12,e.t0=e.catch(6),i=t.tagId||Ce.genDefaultTagId(t.projectId),a=this.projects.get(t.projectId).data.findIndex((function(e){return e===n})),this.projects.get(t.projectId).data.splice(a,1),o=this.tags.get(i).data.findIndex((function(e){return e===n})),this.tags.get(i).data.splice(o,1),e.t0;case 20:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(e,t){return o.apply(this,arguments)})},{key:"createBatch",value:(a=l()(p.a.mark((function e(t){var r,n,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.map((function(e){return e.tagId&&Ce.isDefaultTag(e.tagId,e.projectId)&&(e.tagId=null),e})),e.next=3,Oe.batchCreate(t);case 3:r=e.sent,(n=r.data).forEach((function(e){i.addEndpoint(e)})),this.justAddedId=n[0].id,setTimeout((function(){i.justAddedId=null}),1e3);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"updateById",value:(i=l()(p.a.mark((function e(t,r){var n,i,a,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.data[t].tagId||null,i=null,r.tag&&(a=Ce.findIdByName({projectId:this.data[t].projectId,name:r.tag}),r.tagId=a||null,i=a),e.next=5,Oe.updateById(t,r);case 5:return this.addEndpoint(B()({},r,{id:t}),{assign:!0,skipAddToTag:!0}),o=this.data[t],i&&n!==i&&(n=n||Ce.genDefaultTagId(o.projectId),i=i||Ce.genDefaultTagId(o.projectId),-1!==(s=this.tags.get(n).data.findIndex((function(e){return e===t})))&&this.tags.get(n).data.splice(s,1),this.tags.get(i)||this.tags.set(i,{data:[]}),this.tags.get(i).data.includes(t)||this.tags.get(i).data.push(t)),this.triggerObserver(),e.abrupt("return",{tagChanged:n!==i,endpointId:t});case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"removeById",value:(n=l()(p.a.mark((function e(t){var r,n,i,a,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.data[t],n=r.tagId,i=r.projectId,a=this.projects.get(i).data.findIndex((function(e){return e===t})),o=n||Ce.genDefaultTagId(i),s=this.tags.get(o).data.findIndex((function(e){return e===t})),e.prev=5,this.projects.get(i).data.splice(a,1),this.tags.get(o).data.splice(s,1),e.next=10,Oe.removeById(t);case 10:delete this._componentUsed[t],delete this.data[t],this.triggerObserver(),e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(5),this.projects.get(i).data.splice(a,0,t),this.tags.get(o).data.splice(s,0,t),e.t0;case 20:case"end":return e.stop()}}),e,this,[[5,15]])}))),function(e){return n.apply(this,arguments)})},{key:"toOpenAPIFormat",value:function(e){var t=this.data[e],r=Ce.data[t.tagId],n=t.url||"url...",i=ke()({},n,ke()({},t.method,{summary:t.name||null,description:t.description,tags:r&&[r.name]||null,parameters:t.parameters||null,requestBody:t.requestBody||null,responses:t.responses||null}));return je()(i[n][t.method]).forEach((function(e){"description"===e||i[n][t.method][e]||delete i[n][t.method][e]})),i}},{key:"jumpToPointed",value:function(){var e=this;this.isJumpingToPointed=!0,setTimeout((function(){e.isJumpingToPointed=!1}),1500)}},{key:"searchAll",value:(r=l()(p.a.mark((function e(t){var r,n,i=t.word,a=t.projectId,o=t.type;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.searchAll({word:i,projectId:a,type:o});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"removeTag",value:function(e){if(this.tags.has(e)){var t=this.tags.get(e).data[0];if(t){var r=this.data[t].projectId;this.moveToDefaultTag(e,r),this.tags.delete(e)}}}},{key:"moveToDefaultTag",value:function(e,t){var r=this,n=Ce.genDefaultTagId(t);this.tags.has(n)||this.tags.set(n,{data:[]}),this.tags.get(e).data.forEach((function(e){r.data[e].tagId=null,r.tags.get(n).data.push(e)}))}},{key:"findByComponentUsed",value:function(e){var t=this;return je()(this._componentUsed).filter((function(r){return t._componentUsed[r].has(e)}))}},{key:"searchEndpoint",value:function(e,t){var r=this,n=this.projects.get(t).data.filter((function(t){var n=r.data[t];return!!n&&new RegExp(""+e,"i").test(n.name+" "+n.description+" "+n.url)})),i=ee()(new _.a(n.map((function(e){var t=r.data[e];return t.tagId||Ce.genDefaultTagId(t.projectId)}))));return{endpointIds:0===n.length?null:n,tagIds:0===i.length?null:i}}},{key:"duplicate",value:(t=l()(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(r=re()(this.data[t])).id,e.next=4,this.create(r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"changePosition",value:function(e,t,r){if(this.tags.has(e)){var n=this.tags.get(e).data[t];this.tags.get(e).data[t]=this.tags.get(e).data[r],this.tags.get(e).data[r]=n,this.triggerObserver()}}},{key:"move",value:function(e,t){if(this.tags.has(t)){var r=this.tags.get(t).data.findIndex((function(t){return t===e}));if(-1!==r){var n=0===r?null:this.tags.get(t).data[r-1],i=r===this.tags.get(t).data.length-1?null:this.tags.get(t).data[r+1];return Oe.move({id:e,beforeEndpointId:n,afterEndpointId:i})}}}}]),e}(),Le=Ke(Se.prototype,"observerTrigger",[m.n],{enumerable:!0,initializer:function(){return 1}}),Ne=Ke(Se.prototype,"tags",[m.n],{enumerable:!0,initializer:function(){return m.n.map({})}}),qe=Ke(Se.prototype,"projects",[m.n],{enumerable:!0,initializer:function(){return m.n.map({})}}),Ke(Se.prototype,"findByProjectId",[m.f],o()(Se.prototype,"findByProjectId"),Se.prototype),Ke(Se.prototype,"create",[m.f],o()(Se.prototype,"create"),Se.prototype),Ke(Se.prototype,"createBatch",[m.f],o()(Se.prototype,"createBatch"),Se.prototype),Ke(Se.prototype,"updateById",[m.f],o()(Se.prototype,"updateById"),Se.prototype),Ke(Se.prototype,"removeById",[m.f],o()(Se.prototype,"removeById"),Se.prototype),Ke(Se.prototype,"toOpenAPIFormat",[m.f],o()(Se.prototype,"toOpenAPIFormat"),Se.prototype),Ke(Se.prototype,"jumpToPointed",[m.f],o()(Se.prototype,"jumpToPointed"),Se.prototype),Ke(Se.prototype,"searchAll",[m.f],o()(Se.prototype,"searchAll"),Se.prototype),Ke(Se.prototype,"removeTag",[m.f],o()(Se.prototype,"removeTag"),Se.prototype),Ke(Se.prototype,"moveToDefaultTag",[m.f],o()(Se.prototype,"moveToDefaultTag"),Se.prototype),Ke(Se.prototype,"findByComponentUsed",[m.f],o()(Se.prototype,"findByComponentUsed"),Se.prototype),Ke(Se.prototype,"searchEndpoint",[m.f],o()(Se.prototype,"searchEndpoint"),Se.prototype),Ke(Se.prototype,"duplicate",[m.f],o()(Se.prototype,"duplicate"),Se.prototype),Ke(Se.prototype,"changePosition",[m.f],o()(Se.prototype,"changePosition"),Se.prototype),Ke(Se.prototype,"move",[m.f],o()(Se.prototype,"move"),Se.prototype),Se),Xe=r("4b23");function We(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Qe(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Ze,$e,et,tt=new(Ye=function(){function e(){h()(this,e),We(this,"list",Fe,this),We(this,"isAskToBuyMembershipOpen",Ve,this),We(this,"isAskToConfirmEmailOpen",He,this)}var t,r,n;return y()(e,[{key:"notifySuccess",value:(n=l()(p.a.mark((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.notify(B()({type:"success",message:t},r));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"notifyError",value:(r=l()(p.a.mark((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.notify(B()({type:"error",message:t},r));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"notify",value:(t=l()(p.a.mark((function e(t){var r,n=this,i=t.type,a=t.message,o=t.delay,s=void 0===o?3500:o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="id-"+Object(Xe.b)(),this.list.unshift({id:r,type:i,message:a}),s&&window.setTimeout((function(){var e=n.list.findIndex((function(e){return e.id===r}));n.list.splice(e,1)}),s);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"openBuyMembership",value:function(){this.isAskToBuyMembershipOpen=!0}},{key:"closeBuyMembership",value:function(){this.isAskToBuyMembershipOpen=!1}},{key:"openConfirmEmail",value:function(){this.isAskToConfirmEmailOpen=!0}},{key:"closeConfirmEmail",value:function(){this.isAskToConfirmEmailOpen=!1}}]),e}(),Fe=Qe(Ye.prototype,"list",[m.n],{enumerable:!0,initializer:function(){return[]}}),Ve=Qe(Ye.prototype,"isAskToBuyMembershipOpen",[m.n],{enumerable:!0,initializer:function(){return!1}}),He=Qe(Ye.prototype,"isAskToConfirmEmailOpen",[m.n],{enumerable:!0,initializer:function(){return!1}}),Qe(Ye.prototype,"notifySuccess",[m.f],o()(Ye.prototype,"notifySuccess"),Ye.prototype),Qe(Ye.prototype,"notifyError",[m.f],o()(Ye.prototype,"notifyError"),Ye.prototype),Qe(Ye.prototype,"notify",[m.f],o()(Ye.prototype,"notify"),Ye.prototype),Qe(Ye.prototype,"openBuyMembership",[m.f],o()(Ye.prototype,"openBuyMembership"),Ye.prototype),Qe(Ye.prototype,"closeBuyMembership",[m.f],o()(Ye.prototype,"closeBuyMembership"),Ye.prototype),Qe(Ye.prototype,"openConfirmEmail",[m.f],o()(Ye.prototype,"openConfirmEmail"),Ye.prototype),Qe(Ye.prototype,"closeConfirmEmail",[m.f],o()(Ye.prototype,"closeConfirmEmail"),Ye.prototype),Ye),rt=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/models",e}return x()(t,e),y()(t,[{key:"findAllByProject",value:function(e){return this.request("GET",this.api+"/projects/"+e)}}]),t}(F)),nt=r("FyfS"),it=r.n(nt),at=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/model-items",e}return x()(t,e),t}(F)),ot=r("374s"),st=r("MtYX"),ut=r("+kMu");function ct(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function pt(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var dt,lt,ft=new(Ze=function(){function e(){h()(this,e),ct(this,"observerTrigger",$e,this),ct(this,"model",et,this),this.data={},this._fkItemMap={}}var t,r,n,i,a,o,s;return y()(e,[{key:"addModelItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}if(o.constraints=o.constraints||[],o.indexes=o.indexes||[],o.compositeIndexes=o.compositeIndexes||[],this.data[e.id]=o,e.modelId&&(this.model[e.modelId]=this.model[e.modelId]||{data:[]},this.model[e.modelId].data.includes(e.id)||this.model[e.modelId].data.push(e.id)),e.fk){var u=e.fk.id;this._fkItemMap[u]=this._fkItemMap[u]||new _.a,this._fkItemMap[u].add(e.id)}}}},{key:"triggerObserver",value:function(){var e=this.observerTrigger<2?1:-1;this.observerTrigger+=e}},{key:"isPK",value:function(e){return!!this.data[e]&&this.data[e].constraints.includes(ot.MODEL_CONSTRAINTS.PRIMARY_KEY.short)}},{key:"isFK",value:function(e){return!!this.data[e]&&this.data[e].constraints.includes(ot.MODEL_CONSTRAINTS.FOREIGN_KEY.short)}},{key:"findById",value:(s=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.findById(t);case 2:return r=e.sent,n=r.data,this.addModelItem(n,{force:!0}),this.triggerObserver(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"create",value:(o=l()(p.a.mark((function e(t){var r,n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=t.id||Object(xe.a)(),t.fkId&&(t.fk={id:t.fkId,modelId:this.data[t.fkId].modelId}),this.addModelItem(t),this.triggerObserver(),e.prev=4,e.next=7,at.create(t);case 7:return r=e.sent,n=r.data,this._createPKLine(n.id),e.next=12,this._composedKeyCheckForAdd(n.id,n.model.name);case 12:e.next=20;break;case 14:throw e.prev=14,e.t0=e.catch(4),-1!==(i=this.model[t.modelId].data.findIndex((function(e){return e===t.id})))&&this.model[t.modelId].data.splice(i,1),this.triggerObserver(),e.t0;case 20:case"end":return e.stop()}}),e,this,[[4,14]])}))),function(e){return o.apply(this,arguments)})},{key:"_createPKLine",value:function(e){if(this.isFK(e)){var t=this.data[e],r=Object(ut.e)().scale;st.a.registerLine(t.modelId,t.fk.modelId,t.composedId,r)}}},{key:"_composedKeyCheckForAdd",value:(a=l()(p.a.mark((function e(t){var r,n,i,a,o,s,u,c,d,l,f,h,v=this,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPK(t)){e.next=2;break}return e.abrupt("return");case 2:if(r=this.data[t],n=r.modelId,this.model[n]){e.next=6;break}return e.abrupt("return");case 6:if(0!==(i=this.model[n].data.filter((function(e){return e!==t&&v.isPK(e)}))).length){e.next=9;break}return e.abrupt("return");case 9:if(a=i[0],this._fkItemMap[a]&&0!==this._fkItemMap[a].size){e.next=12;break}return e.abrupt("return");case 12:o=ee()(this._fkItemMap[a]),s=!0,u=!1,c=void 0,e.prev=16,d=it()(o);case 18:if(s=(l=d.next()).done){e.next=27;break}if(f=l.value,!(h=this.data[f])){e.next=24;break}return e.next=24,this.create({column:y+"_"+r.column,type:null,modelId:h.modelId,constraints:[ot.MODEL_CONSTRAINTS.FOREIGN_KEY.short],fkId:t,composedId:h.composedId});case 24:s=!0,e.next=18;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(16),u=!0,c=e.t0;case 33:e.prev=33,e.prev=34,!s&&d.return&&d.return();case 36:if(e.prev=36,!u){e.next=39;break}throw c;case 39:return e.finish(36);case 40:return e.finish(33);case 41:case"end":return e.stop()}}),e,this,[[16,29,33,41],[34,,36,40]])}))),function(e){return a.apply(this,arguments)})},{key:"updateById",value:(i=l()(p.a.mark((function e(t,r){var n,i,a,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=re()(this.data[t]),this.addModelItem(B()({},r,{id:t}),{assign:!0}),this.triggerObserver(),e.prev=3,i=this.isPK(t),e.next=7,at.updateById(t,r);case 7:if(a=this.data[t],!(o=this.isPK(t))||i){e.next=12;break}return e.next=12,this._composedKeyCheckForAdd(t,a.model.name);case 12:if(!i||o){e.next=15;break}return e.next=15,this._removeFKOnOtherTables(t);case 15:e.next=22;break;case 17:throw e.prev=17,e.t0=e.catch(3),this.addModelItem(B()({},n,{id:t}),{assign:!0}),this.triggerObserver(),e.t0;case 22:case"end":return e.stop()}}),e,this,[[3,17]])}))),function(e,t){return i.apply(this,arguments)})},{key:"_removeFKOnOtherTables",value:(n=l()(p.a.mark((function e(t){var r,n,i,a,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._fkItemMap[t]){e.next=28;break}r=!0,n=!1,i=void 0,e.prev=4,a=it()(this._fkItemMap[t].values());case 6:if(r=(o=a.next()).done){e.next=13;break}return s=o.value,e.next=10,this.removeById(s,{skipComposedChecking:!0});case 10:r=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),n=!0,i=e.t0;case 19:e.prev=19,e.prev=20,!r&&a.return&&a.return();case 22:if(e.prev=22,!n){e.next=25;break}throw i;case 25:return e.finish(22);case 26:return e.finish(19);case 27:delete this._fkItemMap[t];case 28:case"end":return e.stop()}}),e,this,[[4,15,19,27],[20,,22,26]])}))),function(e){return n.apply(this,arguments)})},{key:"removeById",value:(r=l()(p.a.mark((function e(t){var r,n,i,a,o,s,u,c,d,l,f,h,v,y=this,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=m.skipComposedChecking,b=void 0!==g&&g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.data[t]){e.next=3;break}return e.abrupt("return");case 3:return n=r.modelId,i=r.composedId,a=this.model[n].data.findIndex((function(e){return e===t})),e.prev=5,this.model[n].data.splice(a,1),e.next=9,at.removeById(t);case 9:if(!this.isPK(t)){e.next=12;break}return e.next=12,this._removeFKOnOtherTables(t);case 12:if(!this.isFK(t)){e.next=43;break}if(st.a.removeLine(r.composedId),b){e.next=42;break}o=this.model[n].data.filter((function(e){return e!==t&&y.data[e].composedId===i})),s=!0,u=!1,c=void 0,e.prev=19,d=it()(o);case 21:if(s=(l=d.next()).done){e.next=28;break}return f=l.value,e.next=25,this.removeById(f,{skipComposedChecking:!0});case 25:s=!0,e.next=21;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(19),u=!0,c=e.t0;case 34:e.prev=34,e.prev=35,!s&&d.return&&d.return();case 37:if(e.prev=37,!u){e.next=40;break}throw c;case 40:return e.finish(37);case 41:return e.finish(34);case 42:this._fkItemMap[r.fk.id].delete(t);case 43:h=Object(ut.e)(),v=h.scale,st.a.moveModel(n,v),delete this.data[t],this.triggerObserver(),e.next=54;break;case 49:throw e.prev=49,e.t1=e.catch(5),this.model[n].data.splice(a,0,t),this.triggerObserver(),e.t1;case 54:case"end":return e.stop()}}),e,this,[[5,49],[19,30,34,42],[35,,37,41]])}))),function(e){return r.apply(this,arguments)})},{key:"removeModel",value:(t=l()(p.a.mark((function e(t){var r,n,i,a,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.model[t]){e.next=28;break}r=!0,n=!1,i=void 0,e.prev=4,a=it()(this.model[t].data.slice(0));case 6:if(r=(o=a.next()).done){e.next=13;break}return s=o.value,e.next=10,this.removeById(s);case 10:r=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),n=!0,i=e.t0;case 19:e.prev=19,e.prev=20,!r&&a.return&&a.return();case 22:if(e.prev=22,!n){e.next=25;break}throw i;case 25:return e.finish(22);case 26:return e.finish(19);case 27:delete this.model[t];case 28:case"end":return e.stop()}}),e,this,[[4,15,19,27],[20,,22,26]])}))),function(e){return t.apply(this,arguments)})}]),e}(),$e=pt(Ze.prototype,"observerTrigger",[m.n],{enumerable:!0,initializer:function(){return 1}}),et=pt(Ze.prototype,"model",[m.n],{enumerable:!0,initializer:function(){return{}}}),pt(Ze.prototype,"isPK",[m.f],o()(Ze.prototype,"isPK"),Ze.prototype),pt(Ze.prototype,"isFK",[m.f],o()(Ze.prototype,"isFK"),Ze.prototype),pt(Ze.prototype,"findById",[m.f],o()(Ze.prototype,"findById"),Ze.prototype),pt(Ze.prototype,"create",[m.f],o()(Ze.prototype,"create"),Ze.prototype),pt(Ze.prototype,"_createPKLine",[m.f],o()(Ze.prototype,"_createPKLine"),Ze.prototype),pt(Ze.prototype,"updateById",[m.f],o()(Ze.prototype,"updateById"),Ze.prototype),pt(Ze.prototype,"removeById",[m.f],o()(Ze.prototype,"removeById"),Ze.prototype),pt(Ze.prototype,"removeModel",[m.f],o()(Ze.prototype,"removeModel"),Ze.prototype),Ze);function ht(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var vt,yt,mt,gt,bt=new(dt=function(){function e(){h()(this,e),function(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"observerTrigger",lt,this),this.data={},this.projects={}}var t,r,n,a,o;return y()(e,[{key:"addModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}o.items=o.items||[],o.items=o.items.map((function(e){return"string"==typeof e?e:(ft.addModelItem(B()({},e,{modelId:o.id})),e.id)})),this.data[e.id]=o,Ue.registerComponentName({type:"model",projectId:o.projectId,data:o})}}},{key:"triggerObserver",value:function(){var e=this.observerTrigger<2?1:-1;this.observerTrigger+=e}},{key:"findById",value:(o=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt.findById(t);case 2:return r=e.sent,n=r.data,this.addModel(n,{force:!0}),this.triggerObserver(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"create",value:(a=l()(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=B()({},t,{hide:[],auth:ot.MODEL_AUTH.PUBLIC}),this.addModel(t),this.projects[t.projectId]=this.projects[t.projectId]||{data:[],isAllLoaded:!0},this.projects[t.projectId].data.unshift(t.id),this.triggerObserver(),e.prev=5,e.next=8,rt.create(t);case 8:e.next=16;break;case 10:throw e.prev=10,e.t0=e.catch(5),r=this.projects[t.projectId].data.findIndex((function(e){return e===t.id})),this.projects[t.projectId].data.splice(r,1),this.triggerObserver(),e.t0;case 16:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return a.apply(this,arguments)})},{key:"updateById",value:(n=l()(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=re()(this.data[t]),this.addModel(B()({},r,{id:t}),{assign:!0}),this.triggerObserver(),e.prev=3,e.next=6,rt.updateById(t,r);case 6:e.next=13;break;case 8:throw e.prev=8,e.t0=e.catch(3),this.addModel(B()({},n,{id:t}),{assign:!0}),this.triggerObserver(),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e,t){return n.apply(this,arguments)})},{key:"removeById",value:(r=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.data[t],n=this.projects[r.projectId].data.findIndex((function(e){return e===t})),e.prev=2,this.projects[r.projectId].data.splice(n,1),e.next=6,rt.removeById(t);case 6:return Ue.unRegisterModel(r),e.next=9,ft.removeModel(r.id);case 9:delete this.data[t],this.triggerObserver(),e.next=18;break;case 13:throw e.prev=13,e.t0=e.catch(2),this.projects[r.projectId].data.splice(n,0,t),this.triggerObserver(),e.t0;case 18:case"end":return e.stop()}}),e,this,[[2,13]])}))),function(e){return r.apply(this,arguments)})},{key:"findAllByProject",value:(t=l()(p.a.mark((function e(t){var r,n,i,a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt.findAllByProject(t);case 2:return r=e.sent,n=r.data,i=n.map((function(e){return a.addModel(e),e.id})),this.projects[t]={data:i,isAllLoaded:!0},this.triggerObserver(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"findAllPKItems",value:function(e){return ft.model[e]?ft.model[e].data.filter((function(e){return ft.isPK(e)})).map((function(e){return ft.data[e]})):[]}}]),e}(),lt=ht(dt.prototype,"observerTrigger",[m.n],{enumerable:!0,initializer:function(){return 1}}),ht(dt.prototype,"findById",[m.f],o()(dt.prototype,"findById"),dt.prototype),ht(dt.prototype,"create",[m.f],o()(dt.prototype,"create"),dt.prototype),ht(dt.prototype,"updateById",[m.f],o()(dt.prototype,"updateById"),dt.prototype),ht(dt.prototype,"removeById",[m.f],o()(dt.prototype,"removeById"),dt.prototype),ht(dt.prototype,"findAllByProject",[m.f],o()(dt.prototype,"findAllByProject"),dt.prototype),ht(dt.prototype,"findAllPKItems",[m.f],o()(dt.prototype,"findAllPKItems"),dt.prototype),dt),It=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/model-notes",e}return x()(t,e),y()(t,[{key:"findAllByProject",value:function(e){return this.request("GET",this.api+"/projects/"+e)}}]),t}(F));function kt(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function wt(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var jt,xt=new(vt=function(){function e(){h()(this,e),kt(this,"observerTrigger",yt,this),kt(this,"isLoaded",mt,this),kt(this,"list",gt,this),this.data={},this.projects={}}var t,r,n,i,a,o;return y()(e,[{key:"addModelNote",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}this.data[e.id]=o}}},{key:"triggerObserver",value:function(){var e=this.observerTrigger<2?1:-1;this.observerTrigger+=e}},{key:"findAll",value:(o=l()(p.a.mark((function e(){var t,r,n,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It.findAll();case 2:return t=e.sent,r=t.data,n=r.map((function(e){return i.addModelNote(e),e.id})),this.list.replace(n),this.isLoaded=!0,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"findById",value:(a=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It.findById(t);case 2:return r=e.sent,n=r.data,this.addModelNote(n,{force:!0}),this.triggerObserver(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"create",value:(i=l()(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=Object(xe.a)(),this.addModelNote(t),this.projects[t.projectId]=this.projects[t.projectId]||{data:[],isAllLoaded:!0},this.projects[t.projectId].data.unshift(t.id),this.triggerObserver(),e.prev=5,e.next=8,It.create(t);case 8:e.next=16;break;case 10:throw e.prev=10,e.t0=e.catch(5),r=this.projects[t.projectId].data.findIndex((function(e){return e===t.id})),this.projects[t.projectId].data.splice(r,1),this.triggerObserver(),e.t0;case 16:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return i.apply(this,arguments)})},{key:"updateById",value:(n=l()(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=re()(this.data[t]),this.addModelNote(B()({},r,{id:t}),{assign:!0}),this.triggerObserver(),e.prev=3,e.next=6,It.updateById(t,r);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),this.addModelNote(B()({},n,{id:t}),{assign:!0}),this.triggerObserver();case 12:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e,t){return n.apply(this,arguments)})},{key:"removeById",value:(r=l()(p.a.mark((function e(t){var r,n,i,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.data[t],n=r.projectId,i=this.list.findIndex((function(e){return e===t})),a=this.projects[n].data.findIndex((function(e){return e===t})),e.prev=4,this.list.splice(i,1),this.projects[n].data.splice(a,1),e.next=9,It.removeById(t);case 9:delete this.data[t],this.triggerObserver(),e.next=18;break;case 13:throw e.prev=13,e.t0=e.catch(4),this.list.splice(i,0,t),this.projects[n].data.splice(a,0,t),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,13]])}))),function(e){return r.apply(this,arguments)})},{key:"findAllByProject",value:(t=l()(p.a.mark((function e(t){var r,n,i,a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It.findAllByProject(t);case 2:return r=e.sent,n=r.data,i=n.map((function(e){return a.addModelNote(e),e.id})),this.projects[t]={data:i,isAllLoaded:!0},this.triggerObserver(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),yt=wt(vt.prototype,"observerTrigger",[m.n],{enumerable:!0,initializer:function(){return 1}}),mt=wt(vt.prototype,"isLoaded",[m.n],{enumerable:!0,initializer:function(){return!1}}),gt=wt(vt.prototype,"list",[m.n],{enumerable:!0,initializer:function(){return[]}}),wt(vt.prototype,"findAll",[m.f],o()(vt.prototype,"findAll"),vt.prototype),wt(vt.prototype,"findById",[m.f],o()(vt.prototype,"findById"),vt.prototype),wt(vt.prototype,"create",[m.f],o()(vt.prototype,"create"),vt.prototype),wt(vt.prototype,"updateById",[m.f],o()(vt.prototype,"updateById"),vt.prototype),wt(vt.prototype,"removeById",[m.f],o()(vt.prototype,"removeById"),vt.prototype),wt(vt.prototype,"findAllByProject",[m.f],o()(vt.prototype,"findAllByProject"),vt.prototype),vt);var Ot,_t,Tt,Bt=new(function(e,t,r,n,i){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}((jt=function(){function e(){h()(this,e)}var t;return y()(e,[{key:"find",value:(t=l()(p.a.mark((function e(t){var r,n,i=t.email;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.find({email:i});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()).prototype,"find",[m.f],o()(jt.prototype,"find"),jt.prototype),jt),Et=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/organizations",e.processor=e.processorOrganization,e}var r,n;return x()(t,e),y()(t,[{key:"findMyAll",value:(n=l()(p.a.mark((function e(){var t,r=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("GET",""+this.api);case 2:return(t=e.sent).data=t.data.map((function(e){return r.processor(e)})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"addCollaborator",value:(r=l()(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("POST",this.api+"/"+t+"/collaborators",{body:{data:r}});case 2:return(n=e.sent).data&&n.data.user&&(n.data.user=this.processorUser(n.data.user)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"deleteCollaborator",value:function(e){var t=e.orgId,r=e.email;return this.request("DELETE",this.api+"/"+t+"/collaborators",{body:{data:{email:r}}})}},{key:"updateCollaboratorRole",value:function(e){var t=e.orgId,r=e.email,n=e.role;return this.request("PATCH",this.api+"/"+t+"/collaborators/role",{body:{data:{email:r,role:n}}})}},{key:"confirmCollaborator",value:function(e){return this.request("POST",this.api+"/collaborators/confirm",{body:{data:e}})}}]),t}(F));function zt(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Pt(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var At,Ct,Mt=new(Ot=function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return zt(e,"myList",_t,e),zt(e,"myListLoaded",Tt,e),e.data={},e}var r,n,i,a,o,s,u,c;return x()(t,e),y()(t,[{key:"addOrganization",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}o.projects&&o.projects.forEach((function(t){be.addProject(B()({},t,{organizationId:e.id}))})),this.data[e.id]=o}}},{key:"findMyAll",value:(c=l()(p.a.mark((function e(){var t,r,n,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.findMyAll();case 2:return t=e.sent,r=t.data,n=r.map((function(e){return i.addOrganization(e),e.id})),this.myList.replace(n),this.myListLoaded=!0,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"findById",value:(u=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.findById(t);case 2:return r=e.sent,n=r.data,this.addOrganization(n,{force:!0}),this.triggerObserver(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"create",value:(s=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.create(t);case 2:return r=e.sent,n=r.data,this.addOrganization(n),this.myList.unshift(n.id),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"updateById",value:(o=l()(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.updateById(t,r);case 2:this.addOrganization(B()({},r,{id:t}),{assign:!0}),this.triggerObserver();case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"removeById",value:(a=l()(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.myList.findIndex((function(e){return e===t})),e.prev=1,this.myList.splice(r,1),e.next=5,Et.removeById(t);case 5:delete this.data[t],e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),this.myList.splice(r,0,t),e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return a.apply(this,arguments)})},{key:"addCollaborator",value:(i=l()(p.a.mark((function e(t,r){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.addCollaborator(t,r);case 2:n=e.sent,i=n.data,this.data[t].members=this.data[t].members||[],this.data[t].members.push(i),this.triggerObserver();case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"updateCollaboratorRole",value:(n=l()(p.a.mark((function e(t){var r,n=t.orgId,i=t.email,a=t.role;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.updateCollaboratorRole({orgId:n,email:i,role:a});case 2:r=this.data[n].members.findIndex((function(e){return e.email===i})),this.data[n].members[r].role=a,this.triggerObserver();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"deleteCollaborator",value:(r=l()(p.a.mark((function e(t){var r,n=t.orgId,i=t.email;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et.deleteCollaborator({orgId:n,email:i});case 2:r=this.data[n].members.findIndex((function(e){return e.email===i})),this.data[n].members.splice(r,1),this.triggerObserver();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"confirmCollaborator",value:function(e){return Et.confirmCollaborator(e)}}]),t}(le),_t=Pt(Ot.prototype,"myList",[m.n],{enumerable:!0,initializer:function(){return[]}}),Tt=Pt(Ot.prototype,"myListLoaded",[m.n],{enumerable:!0,initializer:function(){return!1}}),Pt(Ot.prototype,"findMyAll",[m.f],o()(Ot.prototype,"findMyAll"),Ot.prototype),Pt(Ot.prototype,"findById",[m.f],o()(Ot.prototype,"findById"),Ot.prototype),Pt(Ot.prototype,"create",[m.f],o()(Ot.prototype,"create"),Ot.prototype),Pt(Ot.prototype,"updateById",[m.f],o()(Ot.prototype,"updateById"),Ot.prototype),Pt(Ot.prototype,"removeById",[m.f],o()(Ot.prototype,"removeById"),Ot.prototype),Pt(Ot.prototype,"addCollaborator",[m.f],o()(Ot.prototype,"addCollaborator"),Ot.prototype),Pt(Ot.prototype,"updateCollaboratorRole",[m.f],o()(Ot.prototype,"updateCollaboratorRole"),Ot.prototype),Pt(Ot.prototype,"deleteCollaborator",[m.f],o()(Ot.prototype,"deleteCollaborator"),Ot.prototype),Pt(Ot.prototype,"confirmCollaborator",[m.f],o()(Ot.prototype,"confirmCollaborator"),Ot.prototype),Ot),Rt=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/diagrams",e.processor=e.processorDiagram,e}return x()(t,e),y()(t,[{key:"findAllByProject",value:function(e){var t=this;return this.request("GET",this.api+"/projects/"+e).then((function(e){return B()({},e,{data:e.data.map((function(e){return t.processor(e)}))})}))}}]),t}(F));function Dt(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var St,Lt=new(At=function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return function(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(e,"observerTrigger",Ct,e),e.data={},e.projects={},e}var r,n,a,o,s;return x()(t,e),y()(t,[{key:"addDiagram",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}this.data[e.id]=o}}},{key:"findById",value:(s=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt.findById(t);case 2:return r=e.sent,n=r.data,this.addDiagram(n,{force:!0}),this.triggerObserver(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"create",value:(o=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt.create(t);case 2:return r=e.sent,n=r.data,this.addDiagram(n),this.projects[n.projectId]=this.projects[n.projectId]||{data:[]},this.projects[n.projectId].data.push(n.id),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"updateById",value:(a=l()(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt.updateById(t,r);case 2:this.addDiagram(B()({},r,{id:t}),{assign:!0}),this.triggerObserver();case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"removeById",value:(n=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.data[t],n=-1,this.projects[r.projectId]&&(n=this.projects[r.projectId].data.findIndex((function(e){return e===t}))),e.prev=3,-1!==n&&this.projects[r.projectId].data.splice(n,1),e.next=7,Rt.removeById(t);case 7:return delete this.data[t],e.abrupt("return",{inProjectIdx:n});case 11:throw e.prev=11,e.t0=e.catch(3),-1!==n&&this.projects[r.projectId].data.splice(n,0,t),e.t0;case 15:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(e){return n.apply(this,arguments)})},{key:"findAllByProject",value:(r=l()(p.a.mark((function e(t){var r,n,i,a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt.findAllByProject(t);case 2:return r=e.sent,n=r.data,i=n.map((function(e){return a.addDiagram(e),e.id})),this.projects[t]={data:i},this.triggerObserver(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(le),Ct=Dt(At.prototype,"observerTrigger",[m.n],{enumerable:!0,initializer:function(){return 1}}),Dt(At.prototype,"findById",[m.f],o()(At.prototype,"findById"),At.prototype),Dt(At.prototype,"create",[m.f],o()(At.prototype,"create"),At.prototype),Dt(At.prototype,"updateById",[m.f],o()(At.prototype,"updateById"),At.prototype),Dt(At.prototype,"removeById",[m.f],o()(At.prototype,"removeById"),At.prototype),Dt(At.prototype,"findAllByProject",[m.f],o()(At.prototype,"findAllByProject"),At.prototype),At),Nt=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/memberships",e}var r;return x()(t,e),y()(t,[{key:"isMembershipValid",value:(r=l()(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("GET",this.api+"/subscriptions/result");case 2:return t=e.sent,(r=t.data).user&&(r.user=this.processorUser(r.user)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"cancelSubs",value:function(){return this.request("POST",this.api+"/subscriptions/cancel")}}]),t}(F));function qt(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var Ut,Gt=new(qt((St=function(){function e(){h()(this,e)}var t,r;return y()(e,[{key:"isMembershipValid",value:(r=l()(p.a.mark((function e(){var t,r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt.isMembershipValid();case 2:return t=e.sent,r=t.result,n=t.user,r&&Z.updateUser(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"cancelSubs",value:(t=l()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt.cancelSubs();case 2:Z.cancelSubs();case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()).prototype,"isMembershipValid",[m.f],o()(St.prototype,"isMembershipValid"),St.prototype),qt(St.prototype,"cancelSubs",[m.f],o()(St.prototype,"cancelSubs"),St.prototype),St),Kt=new(function(e){function t(){return h()(this,t),w()(this,(t.__proto__||I()(t)).apply(this,arguments))}return x()(t,e),y()(t,[{key:"vote",value:function(e){return this.request("POST","/api/features",{body:{data:{feature:e}}})}}]),t}(F));var Yt,Ft=new(function(e,t,r,n,i){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}((Ut=function(){function e(){h()(this,e)}return y()(e,[{key:"vote",value:function(e){return Kt.vote(e)}}]),e}()).prototype,"vote",[m.f],o()(Ut.prototype,"vote"),Ut.prototype),Ut),Vt=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/marketings",e}return x()(t,e),y()(t,[{key:"addContact",value:function(e){return this.request("POST",""+this.api,{body:{data:{email:e}}})}}]),t}(F));var Ht,Jt,Xt,Wt=new(function(e,t,r,n,i){var a={};Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}((Yt=function(){function e(){h()(this,e)}return y()(e,[{key:"addContact",value:function(e){return Vt.addContact(e)}}]),e}()).prototype,"addContact",[m.f],o()(Yt.prototype,"addContact"),Yt.prototype),Yt),Qt=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/activities",e.processor=e.processorActivity,e}var r;return x()(t,e),y()(t,[{key:"findAllByProject",value:(r=l()(p.a.mark((function e(t){var r,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.offset,o=void 0===a?0:a,s=i.limit,u=void 0===s?10:s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("GET",this.api+"/projects/"+t,{query:{page:{offset:o,limit:u}}});case 2:return(r=e.sent).data&&(r.data=r.data.map((function(e){return n.processor(e)}))),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(F));function Zt(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function $t(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var er,tr,rr=new(Ht=function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return Zt(e,"observerTrigger",Jt,e),Zt(e,"isLoaded",Xt,e),e.data={},e.projects={},e}var r;return x()(t,e),y()(t,[{key:"addActivity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}this.data[e.id]=o}}},{key:"findAllByProject",value:(r=l()(p.a.mark((function e(t){var r,n,i,a,o,s=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.refresh,d=void 0!==c&&c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=10,n=d?0:this.projects[t]?this.projects[t].data.length:0,e.next=4,Qt.findAllByProject(t,{offset:n,limit:r});case 4:return i=e.sent,a=i.data,o=a.map((function(e){return s.addActivity(e,{assign:!0}),e.id})),this.projects[t]=this.projects[t]||{data:[]},d&&(this.projects[t].data=o),d||(this.projects[t].data=this.projects[t].data.concat(o)),this.projects[t].isAllLoaded=o.length<r,this.triggerObserver(),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(le),Jt=$t(Ht.prototype,"observerTrigger",[m.n],{enumerable:!0,initializer:function(){return 1}}),Xt=$t(Ht.prototype,"isLoaded",[m.n],{enumerable:!0,initializer:function(){return!1}}),$t(Ht.prototype,"findAllByProject",[m.f],o()(Ht.prototype,"findAllByProject"),Ht.prototype),Ht),nr=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/api-templates",e.processor=e.processorApiTemplate,e}var r,n;return x()(t,e),y()(t,[{key:"findOneByProjectId",value:(n=l()(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("GET",this.api+"/projects/"+t);case 2:return(r=e.sent).data&&(r.data=this.processor(r.data)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"createOrUpdate",value:(r=l()(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request("POST",this.api+"/projects/"+t,{body:{data:r}}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}(F));function ir(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var ar,or=new(er=function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return function(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(e,"observerTrigger",tr,e),e.data={},e.projects={},e}var r,n;return x()(t,e),y()(t,[{key:"addApiTemplate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}this.data[e.id]=o}}},{key:"triggerObserver",value:function(){var e=this.observerTrigger<2?1:-1;this.observerTrigger+=e}},{key:"findOneByProjectId",value:(n=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr.findOneByProjectId(t);case 2:return r=e.sent,(n=r.data)&&this.addApiTemplate(n,{force:!0}),this.projects[t]={data:n&&n.id||null},this.triggerObserver(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"createOrUpdate",value:(r=l()(p.a.mark((function e(t,r){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr.createOrUpdate(t,r);case 2:return n=e.sent,i=n.data,this.addApiTemplate({id:i,templates:r},{assign:!0}),this.projects[t]={data:i},this.triggerObserver(),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}(le),tr=ir(er.prototype,"observerTrigger",[m.n],{enumerable:!0,initializer:function(){return 1}}),ir(er.prototype,"findOneByProjectId",[m.f],o()(er.prototype,"findOneByProjectId"),er.prototype),ir(er.prototype,"createOrUpdate",[m.f],o()(er.prototype,"createOrUpdate"),er.prototype),er),sr=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/mock-responses",e}return x()(t,e),y()(t,[{key:"updateResById",value:function(e,t){return this.request("PATCH",this.api+"/"+e+"/res",{body:{data:t}})}},{key:"enableById",value:function(e,t){return this.request("POST",this.api+"/"+e+"/enable",{body:{data:t}})}}]),t}(F));function ur(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var cr,pr,dr=new(ur((ar=function(e){function t(e){h()(this,t);var r=w()(this,(t.__proto__||I()(t)).call(this,e));return r.data={},r.endpoints={},r}var r,n;return x()(t,e),y()(t,[{key:"addMockResponse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}if(this.data[e.id]=o,e.endpointId){this.endpoints[e.endpointId]=this.endpoints[e.endpointId]||{data:[]};var u=this.endpoints[e.endpointId];u.data.includes(e.id)||u.data.push(e.id)}}}},{key:"updateResById",value:(n=l()(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sr.updateResById(t,r);case 2:this.data[t].response.res=r;case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"enableById",value:(r=l()(p.a.mark((function e(t,r){var n,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sr.enableById(t,r);case 2:n=this.data[t].endpointId,this.endpoints[n].data.forEach((function(e){i.data[e].isActive=!1})),this.data[t].response.res=r,this.data[t].isActive=!0,this.triggerObserver();case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}(le)).prototype,"updateResById",[m.f],o()(ar.prototype,"updateResById"),ar.prototype),ur(ar.prototype,"enableById",[m.f],o()(ar.prototype,"enableById"),ar.prototype),ar),lr=new(function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return e.api="/api/previews",e.processor=e.processorPreview,e}var r,n;return x()(t,e),y()(t,[{key:"deploy",value:(n=l()(p.a.mark((function e(t){var r,n=t.projectId,i=t.extraData,a=t.password;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("POST",this.api+"/projects/"+n+"/deploy",{body:{data:{password:a,extraData:i}}});case 2:return(r=e.sent).data&&(r.data=this.processor(r.data)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"login",value:function(e){var t=e.id,r=e.password;return this.request("POST",this.api+"/"+t+"/login",{body:{data:{password:r}}})}},{key:"findByProject",value:(r=l()(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("GET",this.api+"/projects/"+t);case 2:return(r=e.sent).data&&(r.data=this.processor(r.data)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(F)),fr=new(function(){function e(){h()(this,e)}var t;return y()(e,[{key:"fetch",value:(t=l()(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M()("get",t);case 2:return r=e.sent,e.abrupt("return",r.text);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()),hr=r("ODRq"),vr=r.n(hr),yr=function(e,t){return"object"===(void 0===t?"undefined":z()(t))&&null!==t&&"Map"===t.dataType?new vr.a(t.value):t};function mr(e,t,r,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var gr=new(cr=function(e){function t(){h()(this,t);var e=w()(this,(t.__proto__||I()(t)).call(this));return function(e,t,r,n){r&&i()(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(e,"observerTrigger",pr,e),e.data={},e.projects={},e.files={},e.endpointSet={},e}var r,n,a,o,s;return x()(t,e),y()(t,[{key:"addPreview",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,i=t.assign,a=void 0!==i&&i;if(n||!this.data[e.id]||a){var o=e;if(this.data[e.id]&&a){var s=this.data[e.id];o=B()({},s,o)}this.data[e.id]=o}}},{key:"triggerObserver",value:function(){var e=this.observerTrigger<2?1:-1;this.observerTrigger+=e}},{key:"_fetchPreviewFile",value:(s=l()(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr.fetch(r);case 2:n=e.sent,this.files[t]=JSON.parse(n,yr),this.triggerObserver();case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"findById",value:(o=l()(p.a.mark((function e(t){var r,n,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr.findById(t);case 2:return r=e.sent,n=r.data,this.addPreview(n,{force:!0}),n.fileUrl&&this._fetchPreviewFile(t,n.fileUrl),n.mockResponses.forEach((function(e){i.endpointSet[t]=i.endpointSet[t]||new _.a,i.endpointSet[t].add(e.endpointId),dr.addMockResponse(e)})),this.triggerObserver(),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"removeById",value:(a=l()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr.removeById(t);case 2:delete this.data[t];case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"deploy",value:(n=l()(p.a.mark((function e(t){var r,n,i=t.projectId,a=t.extraData,o=t.password;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr.deploy({projectId:i,extraData:a,password:o});case 2:r=e.sent,n=r.data,this.addPreview(n,{assign:!0}),this.projects[i]={data:n.id},this.triggerObserver();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"login",value:function(e){var t=e.id,r=e.password;return lr.login({id:t,password:r})}},{key:"findByProject",value:(r=l()(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr.findByProject(t);case 2:r=e.sent,(n=r.data)?(this.addPreview(n,{assign:!0}),this.projects[t]={data:n.id}):this.projects[t]={data:null},this.triggerObserver();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),t}(le),pr=mr(cr.prototype,"observerTrigger",[m.n],{enumerable:!0,initializer:function(){return 1}}),mr(cr.prototype,"findById",[m.f],o()(cr.prototype,"findById"),cr.prototype),mr(cr.prototype,"removeById",[m.f],o()(cr.prototype,"removeById"),cr.prototype),mr(cr.prototype,"deploy",[m.f],o()(cr.prototype,"deploy"),cr.prototype),mr(cr.prototype,"login",[m.f],o()(cr.prototype,"login"),cr.prototype),mr(cr.prototype,"findByProject",[m.f],o()(cr.prototype,"findByProject"),cr.prototype),cr)},MtYX:function(e,t,r){"use strict";(function(e){var n=r("GQeE"),i=r.n(n),a=r("iCc5"),o=r.n(a),s=r("V7oC"),u=r.n(s),c=r("VNV7"),p=r("+kMu"),d=function(){function t(){o()(this,t),this.innerDotAmount=7,this.innerDotMargin=5,this.lineMap={},this.modelMap={}}return u()(t,[{key:"registerLine",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!document.getElementById(Object(p.c)(e))||!document.getElementById(Object(p.c)(t)))return setTimeout((function(){n.registerLine(e,t,i)}),100);if(this.lineMap[r])return this.lineMap[r].reference+=1,r;var a=document.getElementById(c.c),o=document.createElementNS("http://www.w3.org/2000/svg","polyline");o.id=r,o.style.stroke="#000",o.style.strokeWidth=1,o.style.strokeDasharray="2,2",o.style.fill="none";var s=this._getPolylinePoints(e,t,i),u=s.points,d=s.end1CenterIdx,l=s.end2CenterIdx;return o.setAttribute("points",u),a.appendChild(o),this.lineMap[r]={end1:e,end2:t,end1CenterIdx:d,end2CenterIdx:l,reference:1},this.modelMap[e]=this.modelMap[e]||{lines:[]},this.modelMap[e].lines.push(r),this.modelMap[t]=this.modelMap[t]||{lines:[]},this.modelMap[t].lines.push(r),this.adjustLinePosition(i),r}},{key:"_byScale",value:function(e,t){return parseFloat((e/t).toFixed(2))}},{key:"_getPolylinePoints",value:function(e,t,r,n){var i=document.getElementById(Object(p.c)(e)),a=document.getElementById(Object(p.c)(t)),o=i.getBoundingClientRect(),s=a.getBoundingClientRect(),u=document.getElementById(c.b).getBoundingClientRect(),d=void 0,l=void 0;if(n){var f=this.lineMap[n];d=f.end1CenterIdx,l=f.end2CenterIdx}else d=this.modelMap[e]?this.modelMap[e].lines.length%this.innerDotAmount:0,l=this.modelMap[t]?this.modelMap[t].lines.length%this.innerDotAmount:0;var h=-u.x,v=-u.y,y=(d-Math.floor(this.innerDotAmount/2))*this.innerDotMargin*r,m=(l-Math.floor(this.innerDotAmount/2))*this.innerDotMargin*r;return{points:this._byScale(o.left+o.width/2+y+h,r)+","+this._byScale(o.top+o.height/2-y+v,r)+" "+this._byScale(s.left+s.width/2+m+h,r)+","+this._byScale(o.top+o.height/2-y+v,r)+" "+this._byScale(s.left+s.width/2+m+h,r)+","+this._byScale(s.top+s.height/2-m+v,r),end1CenterIdx:d,end2CenterIdx:l}}},{key:"adjustLinePosition",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;i()(this.modelMap).forEach((function(r){e.modelMap[r].lines&&e.modelMap[r].lines.filter((function(e){return Boolean(e)})).forEach((function(r){var n=e.lineMap[r],i=n.end1,a=n.end2,o=e._getPolylinePoints(i,a,t,r).points,s=document.getElementById(r);s&&s.setAttribute("points",o)}))}))}},{key:"moveModel",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.modelMap[e]&&this.modelMap[e].lines.filter((function(e){return Boolean(e)})).forEach((function(e){var n=t.lineMap[e],i=n.end1,a=n.end2,o=t._getPolylinePoints(i,a,r,e).points,s=document.getElementById(e);s&&s.setAttribute("points",o)}))}},{key:"removeModel",value:function(e){var t=Object(p.c)(e);if(this.modelMap[t]&&this.modelMap[t].lines){for(;this.modelMap[t].lines.length>0;)this.removeLine(this.modelMap[t].lines[0]);delete this.modelMap[t]}}},{key:"removeLine",value:function(t){if(this.lineMap[t]){var r=this.lineMap[t],n=r.end1,i=r.end2,a=this.modelMap[n].lines.findIndex((function(e){return e===t}));this.modelMap[n].lines.splice(a,1);var o=this.modelMap[i].lines.findIndex((function(e){return e===t}));this.modelMap[i].lines.splice(o,1),this.lineMap[t].reference-=1,0===this.lineMap[t].reference&&(delete this.lineMap[t],e("#"+t).remove()),this._recalculateCenterIdx(n),this._recalculateCenterIdx(i);var s=Object(p.e)().scale;this.adjustLinePosition(s)}}},{key:"_recalculateCenterIdx",value:function(e){var t=this;if(this.modelMap[e]){var r=0;this.modelMap[e].lines.forEach((function(n){if(t.lineMap[n]){var i=r%t.innerDotAmount;t.lineMap[n].end1===e&&(t.lineMap[n].end1CenterIdx=i),t.lineMap[n].end2===e&&(t.lineMap[n].end2CenterIdx=i),r+=1}}))}}},{key:"highlightRelatedLines",value:function(t){var r=this.modelMap[t];r&&r.lines&&r.lines.forEach((function(t){e("#"+t).css({stroke:"#568ef2",strokeWidth:2})}))}},{key:"unhighlightRelatedLines",value:function(t){var r=this.modelMap[t];r&&r.lines&&r.lines.forEach((function(t){e("#"+t).css({stroke:"#000",strokeWidth:1})}))}},{key:"reset",value:function(){this.lineMap={},this.modelMap={}}}]),t}();t.a=new d}).call(this,r("r7DH"))},VNV7:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));var n="projectDBRelationSVG",i="projectDBRelation",a="projectDBRelationInner"},hqmY:function(e,t,r){"use strict";var n=r("gDS+"),i=r.n(n),a=r("EJiy"),o=r.n(a);t.a={get:function(e){return window.sessionStorage.getItem(e)},set:function(e,t){"number"==typeof t&&(t=String(t)),"object"===(void 0===t?"undefined":o()(t))&&(t=i()(t)),window.sessionStorage.setItem(e,t)},remove:function(e){window.sessionStorage.removeItem(e)},clear:function(){window.sessionStorage.clear()}}}}]);